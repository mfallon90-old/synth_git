
#ifndef MYLIB_CONSTANTS_H
#define MYLIB_CONSTANTS_H


    struct node {
        unsigned int chan_num = 0;
        unsigned int note = 0;
        unsigned int mod = 0;
        unsigned char index = 255;
        int awaiting_reset = 0;
        bool available = true;
        bool enable = false;
        struct node *next;
    };

    struct info {
        int rst_cnt = 0;
        bool in_use = false;
        int awaiting_rst = 0;
        node *index = NULL;
    };

    struct car_mod {
        unsigned int carrier = 0;
        unsigned int modulator = 0;
        unsigned char index = 255;
    };

    extern node *head, *tail;
    extern info note_info;
    extern car_mod notes;

	//Register Base Address
	#define BASE_ADDR XPAR_FM_SYNTH_WRAPPER_0_BASEADDR

	//UART Base Address
	#define UART_ADDR XPAR_AXI_UART_WRAPPER_0_BASEADDR

    #define NOTE_ON     0x90
    #define NOTE_OFF    0x80
    #define MODE        0xb0
    #define PATCH       0x07
    #define VOLUME      0x5B

    #define S_STATUS    0
    #define S_PLAY      1
    #define S_VELOCITY  2
    #define S_MODE      3
    #define S_PATCH     4
    #define S_VOLUME    5

    #define NUM_CHANNELS 16
    #define MASK_ON  0X80000000
    #define MASK_OFF 0X7FFFFFFF

    #define TAU_ADDR 128

    #define TAU_SLOW    0b00001000000000000100101001010010
    #define TAU_MID     0b00001000000000000011110111101111
    #define TAU_FAST    0b00001000000000000010000100001000

    #define MOD_AMP_0   0b00000000000000000000000000000000
    #define MOD_AMP_1   0b01000000000000000000000000000000
    #define MOD_AMP_2   0b10000000000000000000000000000000
    #define MOD_AMP_3   0b11000000000000000000000000000000
    #define MOD_AMP_RST 0b00111111111111111111111111111111

    #define VOLUME_0    0b00000000000000000000000000000000
    #define VOLUME_1    0b00000010000000000000000000000000
    #define VOLUME_2    0b00000011000000000000000000000000
    #define VOLUME_3    0b00000100000000000000000000000000
    #define VOLUME_4    0b00000101000000000000000000000000
    #define VOLUME_5    0b00000110000000000000000000000000
    #define VOLUME_6    0b00000111000000000000000000000000
    #define VOLUME_7    0b00001000000000000000000000000000
    #define VOLUME_8    0b00001001000000000000000000000000
    #define VOLUME_9    0b00001010000000000000000000000000
    #define VOLUME_RST  0b11000000001111111111111111111111

    // This is only valid for 88.2KHz sampling rate
    #define C0   0b00000000000001001000111001100011
    #define CS0  0b00000000000001001101001110111111
    #define D0   0b00000000000001010001110100111010
    #define DS0  0b00000000000001010110101100010011
    #define E0   0b00000000000001011011110110001110
    #define F0   0b00000000000001100001010011110001
    #define FS0  0b00000000000001100111000110000101
    #define G0   0b00000000000001101101001110011011
    #define GS0  0b00000000000001110011101110000110
    #define A0   0b00000000000001111010100110011111
    #define AS0  0b00000000000010000001111001000100
    #define B0   0b00000000000010001001100111011001
    #define C1   0b00000000000010010001110011000110
    #define CS1  0b00000000000010011010011101111101
    #define D1   0b00000000000010100011101001110011
    #define DS1  0b00000000000010101101011000100111
    #define E1   0b00000000000010110111101100011101
    #define F1   0b00000000000011000010100111100001
    #define FS1  0b00000000000011001110001100001011
    #define G1   0b00000000000011011010011100110110
    #define GS1  0b00000000000011100111011100001100
    #define A1   0b00000000000011110101001100111110
    #define AS1  0b00000000000100000011110010001000
    #define B1   0b00000000000100010011001110110001
    #define C2   0b00000000000100100011100110001101
    #define CS2  0b00000000000100110100111011111010
    #define D2   0b00000000000101000111010011100111
    #define DS2  0b00000000000101011010110001001110
    #define E2   0b00000000000101101111011000111001
    #define F2   0b00000000000110000101001111000011
    #define FS2  0b00000000000110011100011000010101
    #define G2   0b00000000000110110100111001101101
    #define GS2  0b00000000000111001110111000011001
    #define A2   0b00000000000111101010011001111101
    #define AS2  0b00000000001000000111100100010000
    #define B2   0b00000000001000100110011101100010
    #define C3   0b00000000001001000111001100011001
    #define CS3  0b00000000001001101001110111110100
    #define D3   0b00000000001010001110100111001110
    #define DS3  0b00000000001010110101100010011100
    #define E3   0b00000000001011011110110001110010
    #define F3   0b00000000001100001010011110000110
    #define FS3  0b00000000001100111000110000101010
    #define G3   0b00000000001101101001110011011010
    #define GS3  0b00000000001110011101110000110010
    #define A3   0b00000000001111010100110011111001
    #define AS3  0b00000000010000001111001000100000
    #define B3   0b00000000010001001100111011000101
    #define C4   0b00000000010010001110011000110010
    #define CS4  0b00000000010011010011101111101001
    #define D4   0b00000000010100011101001110011011
    #define DS4  0b00000000010101101011000100111000
    #define E4   0b00000000010110111101100011100101
    #define F4   0b00000000011000010100111100001011
    #define FS4  0b00000000011001110001100001010101
    #define G4   0b00000000011011010011100110110011
    #define GS4  0b00000000011100111011100001100100
    #define A4   0b00000000011110101001100111110011
    #define AS4  0b00000000100000011110010001000001
    #define B4   0b00000000100010011001110110001001
    #define C5   0b00000000100100011100110001100101
    #define CS5  0b00000000100110100111011111010001
    #define D5   0b00000000101000111010011100110111
    #define DS5  0b00000000101011010110001001101111
    #define E5   0b00000000101101111011000111001010
    #define F5   0b00000000110000101001111000010110
    #define FS5  0b00000000110011100011000010101010
    #define G5   0b00000000110110100111001101100111
    #define GS5  0b00000000111001110111000011001000
    #define A5   0b00000000111101010011001111100110
    #define AS5  0b00000001000000111100100010000010
    #define B5   0b00000001000100110011101100010010
    #define C6   0b00000001001000111001100011001001
    #define CS6  0b00000001001101001110111110100010
    #define D6   0b00000001010001110100111001101110
    #define DS6  0b00000001010110101100010011011110
    #define E6   0b00000001011011110110001110010100
    #define F6   0b00000001100001010011110000101101
    #define FS6  0b00000001100111000110000101010011
    #define G6   0b00000001101101001110011011001110
    #define GS6  0b00000001110011101110000110010000
    #define A6   0b00000001111010100110011111001011
    #define AS6  0b00000010000001111001000100000100
    #define B6   0b00000010001001100111011000100101
    #define C7   0b00000010010001110011000110010010
    #define CS7  0b00000010011010011101111101000101
    #define D7   0b00000010100011101001110011011100
    #define DS7  0b00000010101101011000100110111100
    #define E7   0b00000010110111101100011100100111
    #define F7   0b00000011000010100111100001011001
    #define FS7  0b00000011001110001100001010100111
    #define G7   0b00000011011010011100110110011100
    #define GS7  0b00000011100111011100001100011111
    #define A7   0b00000011110101001100111110010110
    #define AS7  0b00000100000011110010001000001000
    #define B7   0b00000100010011001110110001001001
    #define C8   0b00000100100011100110001100100101
    #define CS8  0b00000100110100111011111010001001
    #define D8   0b00000101000111010011100110111000
    #define DS8  0b00000101011010110001001101111000
    #define E8   0b00000101101111011000111001001111
    #define F8   0b00000110000101001111000010110011
    #define FS8  0b00000110011100011000010101001101
    #define G8   0b00000110110100111001101100111000
    #define GS8  0b00000111001110111000011000111111
    #define A8   0b00000111101010011001111100101100
    #define AS8  0b00001000000111100100010000010000
    #define B8   0b00001000100110011101100010010011
    #define C9   0b00001001000111001100011001001010
    #define CS9  0b00001001101001110111110100010010
    #define D9   0b00001010001110100111001101101111
    #define DS9  0b00001010110101100010011011110001
    #define E9   0b00001011011110110001110010011101
    #define F9   0b00001100001010011110000101100110
    #define FS9  0b00001100111000110000101010011011
    #define G9   0b00001101101001110011011001101111
    #define GS9  0b00001110011101110000110001111110
    #define A9   0b00001111010100110011111001011000
    #define AS9  0b00010000001111001000100000100000
    #define B9   0b00010001001100111011000100100101
    #define C10  0b00010010001110011000110010010100
    #define CS10 0b00010011010011101111101000100100
    #define D10  0b00010100011101001110011011011110
    #define DS10 0b00010101101011000100110111100001
    #define E10  0b00010110111101100011100100111011
    #define F10  0b00011000010100111100001011001100
    #define FS10 0b00011001110001100001010100110110
    #define G10  0b00011011010011100110110011011111
    #define GS10 0b00011100111011100001100011111100
    #define A10  0b00011110101001100111110010110001
    #define AS10 0b00100000011110010001000001000000
    #define B10  0b00100010011001110110001001001011

    static const unsigned int TUNING_WORD[132] =   {C0,  CS0,  D0,  DS0,  E0,  F0,  FS0,  G0,  GS0,  A0,  AS0,  B0,
                                                    C1,  CS1,  D1,  DS1,  E1,  F1,  FS1,  G1,  GS1,  A1,  AS1,  B1,
                                                    C2,  CS2,  D2,  DS2,  E2,  F2,  FS2,  G2,  GS2,  A2,  AS2,  B2,
                                                    C3,  CS3,  D3,  DS3,  E3,  F3,  FS3,  G3,  GS3,  A3,  AS3,  B3,
                                                    C4,  CS4,  D4,  DS4,  E4,  F4,  FS4,  G4,  GS4,  A4,  AS4,  B4,
                                                    C5,  CS5,  D5,  DS5,  E5,  F5,  FS5,  G5,  GS5,  A5,  AS5,  B5,
                                                    C6,  CS6,  D6,  DS6,  E6,  F6,  FS6,  G6,  GS6,  A6,  AS6,  B6,
                                                    C7,  CS7,  D7,  DS7,  E7,  F7,  FS7,  G7,  GS7,  A7,  AS7,  B7,
                                                    C8,  CS8,  D8,  DS8,  E8,  F8,  FS8,  G8,  GS8,  A8,  AS8,  B8,
                                                    C9,  CS9,  D9,  DS9,  E9,  F9,  FS9,  G9,  GS9,  A9,  AS9,  B9,
                                                    C10, CS10, D10, DS10, E10, F10, FS10, G10, GS10, A10, AS10, B10};

#endif
